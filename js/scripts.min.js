!function(a){var b={previewFullyLoaded:!1,init:function(){console.log("Page.init"),this.queryCheck(),this.bindEvents(),a("#preview_page").length&&this.previewLazyLoad(),a(".article").length&&((a(".widecol").length||a(".col").length)&&this.setImageHeight(),this.singleLazyLoad()),a(".news_cols").length&&(this.setImageHeight(),this.newsPrep())},bindEvents:function(){console.log("Page.bindEvents");var b=this;a("#alphabetical_sorting").on("click",function(){b.sortList("alphabetical")}),a("#chronological_sorting").on("click",function(){b.sortList("chronological")}),a("#cat_select option").on("change",function(a){a.preventDefault()})},sortList:function(b){function c(b){e.removeClass("asc").addClass("desc"),a("#"+b+"_sorting").siblings(".sort_arrows").find(".sort_desc").css("opacity","1").siblings(".sort_asc").css("opacity","0")}function d(b){e.removeClass("desc").addClass("asc"),a("#"+b+"_sorting").siblings(".sort_arrows").find(".sort_asc").css("opacity","1").siblings(".sort_desc").css("opacity","0")}console.log("Page.sortList",b);var e=a("#archive_list"),f=e.children(".line").get();"alphabetical"===b?(e.hasClass("asc")?(f.sort(function(b,c){return a(b).text().toUpperCase().localeCompare(a(c).text().toUpperCase())}),c(b)):(f.sort(function(b,c){return a(c).text().toUpperCase().localeCompare(a(b).text().toUpperCase())}),d(b)),a(".title .right span").css("opacity","0")):"chronological"===b&&(e.hasClass("asc")?(f.sort(function(b,c){return a(c).attr("data-date").localeCompare(a(b).attr("data-date"))}),c(b)):(f.sort(function(b,c){return a(b).attr("data-date").localeCompare(a(c).attr("data-date"))}),d(b)),a(".title .left span").css("opacity","0")),a.each(f,function(a,b){e.append(b)})},loadingLoop:function(b,c){console.log("Page.loadingLoop");var d,e=this;d="img"===b?a(b).eq(c):a(b).eq(c).find("img");var f=d.attr("data-src");void 0!==f&&f.indexOf("www.experimentaljetset.nl")>-1&&(f=f.replace("https://","http://"),f=f.replace("http://www.experimentaljetset.nl/",ROOT)),d.attr("src",f).on("load error",function(){"img"===b?a(b).css("height",""):a(b).find("img").css("height",""),a(b).eq(c).addClass("loaded"),c<a(b).length&&(c++,e.loadingLoop(b,c))})},previewLazyLoad:function(){console.log("Page.previewLazyLoad");var b,c=250,d=140,e=Math.floor(a(window).width()/d),f=Math.floor(a(window).height()/c),g=f*e,h=(a(".preview").length,this);a(".preview").each(function(c){c<g&&(b=a(this).find("img"),b.attr("src",b.attr("data-src")),a(this).addClass("loaded"))}),a(window).one("scroll resize",function(){h.previewFullyLoaded||h.loadingLoop(".preview",g),h.previewFullyLoaded=!0})},singleLazyLoad:function(){console.log("Page.singleLazyLoad"),this.loadingLoop("img",0)},newsPrep:function(){console.log("Page.newsPrep"),a(".newsblock").each(function(){if(!a(this).is(":empty")){var b=a(this).find(".news_item_content").html().trim().substring(0,3);if("<a "===b){var c=a(this).find("a").eq(0);c.find("img").length&&c.find("img").css("margin-top","0")}}}),this.loadingLoop("img",0)},catSelect:function(b){console.log("Page.catSelect",b),a(".line").each(function(){a(this).attr("data-key").indexOf(b)!==-1?a(this).show():a(this).hide()}),a("#cat_select").val(b)},queryCheck:function(){if(console.log("Page.queryCheck"),window.location.href.indexOf("?tag=")>-1){var b=decodeURIComponent(window.location.href.split("?tag=")[1]);b=b.replace(/\+/g," "),this.catSelect(b)}else a(".line").show()},setImageHeight:function(){console.log("Page.setImageHeight");var b,c,d=a("#main_content").width();if(a(".newsblock").length)var e=parseInt(a(".newsblock").css("flex-basis"))/100,b=e*d;else a(".widecol").length?b=a(".widecol a").width()-12:a(".col").length&&(b=a(".col a").width()-12);a("#main_content img").each(function(){var d=a(this),e=parseInt(a(this).attr("width")),f=e/a(this).attr("height");a.isNumeric(f)&&(b>e&&(b=e),c=b/f,d.css("height",c))})}};jQuery(function(){b.init()})}(jQuery);