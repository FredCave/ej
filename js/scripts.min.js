var Page={init:function(){console.log("Page.init"),this.queryCheck(),this.bindEvents(),$("#preview_page").length&&this.previewLazyLoad(),$(".article").length&&this.singleLazyLoad(),$(".news_cols").length&&this.newsPrep()},bindEvents:function(){console.log("Page.bindEvents");var a=this;$("#alphabetical_sorting").on("click",function(){a.sortList("alphabetical")}),$("#chronological_sorting").on("click",function(){a.sortList("chronological")}),$("#cat_select option").on("change",function(a){a.preventDefault(),console.log(55)})},sortList:function(a){function b(a){console.log("descToggle"),d.removeClass("asc").addClass("desc"),$("#"+a+"_sorting").siblings(".sort_arrows").find(".sort_desc").css("opacity","1").siblings(".sort_asc").css("opacity","0"),console.log($("#"+a+"_sorting").siblings(".sort_arrows").find(".sort_desc"))}function c(a){console.log("ascToggle"),d.removeClass("desc").addClass("asc"),$("#"+a+"_sorting").siblings(".sort_arrows").find(".sort_asc").css("opacity","1").siblings(".sort_desc").css("opacity","0")}console.log("Page.sortList",a);var d=$("#archive_list"),e=d.children(".line").get();"alphabetical"===a?(d.hasClass("asc")?(e.sort(function(a,b){return $(a).text().toUpperCase().localeCompare($(b).text().toUpperCase())}),b(a)):(e.sort(function(a,b){return $(b).text().toUpperCase().localeCompare($(a).text().toUpperCase())}),c(a)),$(".title .right span").css("opacity","0")):"chronological"===a&&(d.hasClass("asc")?(e.sort(function(a,b){return $(b).attr("data-date").localeCompare($(a).attr("data-date"))}),b(a)):(e.sort(function(a,b){return $(a).attr("data-date").localeCompare($(b).attr("data-date"))}),c(a)),$(".title .left span").css("opacity","0")),$.each(e,function(a,b){d.append(b)})},loadingLoop:function(a,b){console.log("Page.loadingLoop");var c,d=this;c="img"===a?$(a).eq(b):$(a).eq(b).find("img"),c.attr("src",c.attr("data-src")).on("load",function(){$(a).eq(b).addClass("loaded"),b<$(a).length&&(b++,d.loadingLoop(a,b))})},previewLazyLoad:function(){console.log("Page.previewLazyLoad");var a,b=250,c=140,d=Math.floor($(window).width()/c),e=Math.floor($(window).height()/b),f=e*d,g=($(".preview").length,this);$(".preview").each(function(b){b<f&&(a=$(this).find("img"),a.attr("src",a.attr("data-src")),$(this).addClass("loaded"))}),$(window).one("scroll resize",function(){g.loadingLoop(".preview",f)})},singleLazyLoad:function(){console.log("Page.singleLazyLoad"),this.loadingLoop("img",0)},newsPrep:function(){console.log("Page.newsPrep"),$(".newsblock").each(function(){if($(this).find("img").each(function(){$(this).parent("a").length&&$(this).unwrap()}),!$(this).is(":empty")){var a=$(this).find(".news_item_content").html().trim().substring(0,4);"<img"===a&&$(this).find("img").first().css("margin-top","0")}})},catSelect:function(a){console.log("Page.catSelect",a),$(".line").each(function(){console.log(358,$(this).attr("data-key")),$(this).attr("data-key").indexOf(a)!==-1?$(this).show():$(this).hide()}),$("#cat_select").val(a)},queryCheck:function(){if(console.log("Page.queryCheck"),window.location.href.indexOf("?tag=")>-1){var a=decodeURIComponent(window.location.href.split("?tag=")[1]);a=a.replace(/\+/g," "),this.catSelect(a)}else $(".line").show()}};$(document).on("ready",function(){Page.init()});